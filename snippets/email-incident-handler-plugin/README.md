# Email Incident Handler Plugin
This process engine plugin sends out repeating emails after an incident is unresolved about a certain time.

## Show me the important parts!

A [custom incident handler](src/main/java/com/camunda/consulting/email_incident_handler_plugin/EmailIncidentHandler.java) creates a job in the database, which is handled by a [custom job handler](src/main/java/com/camunda/consulting/email_incident_handler_plugin/ReminderEmailJobHandler.java) to send out an email when it is due.

## How does it work?

The EmailIncidentHandler extends the DefaultIncidentHandler to create a job, when the incident occurred. (see`handleIncident(IncidentContext context, String message)`)

The Job is cerated with a new JobHandlerType `reminder-job`. The implementation sends out an email (in the example it writes a message in the log) when the job is due. See `ReminderEmailJobHandler.execute()` for further details. The ReminderEmailJobHandler extends the TimerEventHandler to reuse the repeat features of timer events.

## How to use it?

You have to implement the sending of emails according to your infrastructure.

You have to configure the cycle of sending around the emails. There is a constant `REMINDER_MINUTES` in the `EmailIncidentHandler` to configure this. Maybe you will get the value from another configuration.

To get started refer to `InMemoryH2Test` and `camunda.cfg.xml`.
For using it in production you have to [integrate the plugin into your Camunda BPM configuration](https://docs.camunda.org/manual/latest/user-guide/process-engine/process-engine-plugins/).

## Environment Restrictions
Built and tested against Camunda BPM version 7.8.0.

## License
[Apache License, Version 2.0](http://www.apache.org/licenses/LICENSE-2.0).

This project has been generated by the Maven archetype
[camunda-archetype-engine-plugin-7.8.0](https://docs.camunda.org/manual/latest/user-guide/process-applications/maven-archetypes/).


<!-- HTML snippet for index page
  <tr>
    <td><img src="snippets/email-incident-handler-plugin/src/main/resources/process.png" width="100"></td>
    <td><a href="snippets/email-incident-handler-plugin">Camunda BPM Process Engine Plugin</a></td>
    <td>A Plugin for [Camunda BPM](http://docs.camunda.org).</td>
  </tr>
-->
<!-- Tweet
New @CamundaBPM example: Camunda BPM Process Engine Plugin - A Plugin for [Camunda BPM](http://docs.camunda.org). https://github.com/camunda/camunda-consulting/tree/master/snippets/email-incident-handler-plugin
-->